utuility function for version 3